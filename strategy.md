# MACD
## Описание стратегии
### 1. Продажа 
* Если цена ниже скользящей средней с уровнем 100 то ищем точки входа на продажу
Однако освонвным индикатором является MACD
#### 1.1 Консервативная стратегия

1. Строится индикатор MACD
2. Формирование точки входа на продажу:
   * Точка входа выбирается на основании построенного индикатора. После смены сигнала 
   ждем один день, если тенденция сохраняется - то продаем.
3. Считаем значения для take profit и stop loss: tp = 1.5sl
   * stop loss - если цена находится близко к скользящей средней то выносим stop loss за скользящую среднюю.
   * иначе stop loss устонавливается на уровне сопротивления, ближайшему к точке продажи

* Итог: доход tp - цена продажи

#### 1.2 Рисковая стратегия
   * После исполнения консервотивной стратегии возможно дальнейшее продолжение торгов, осознавая риски
Цена должна достичь уровень tp

1. Покупка по цене на уровне tp
2. Установить границу безубыточности на уровне цены продажи
3. take profit = 3sl, где sl 

* Итог: доход 0 или доход 2*(tp - цена продажи)

### 2. Покупка
* Если цена держится на уровне выше скользящей средней с уровнем 100 ищем точки входа на покупку 
ориентируясь на показатель MACD

#### 2.1 Консервативная стратегия

1. Строится индикатор MACD
2. Формирование точки входа на покупку:
   * Точка входа выбирается на основании построенного индикатора. После смены сигнала 
   ждем один день, если тенденция сохраняется - то покупаем.
3. Считаем значения для take profit и stop loss: tp = 1.5sl
   * stop loss - если цена находится близко к скользящей средней то выносим stop loss за скользящую среднюю.
   * иначе stop loss устонавливается на уровне сопротивления, ближайшему к точке продажи

* Итог: доход tp - цена покупки

#### 2.2 Рисковая стратегия
   * После исполнения консервотивной стратегии возможно дальнейшее продолжение торгов, осознавая риски
Цена должна достичь уровень tp

1. Продажа по цене на уровне tp
2. Установить границу безубыточности на уровне цены покупки
3. take profit = 3sl, где sl 

* Итог: доход 0 или доход 2*(tp - цена покупки)

## Необходимые функции
1. Скользящая средняя с уровнем 100
   * на вход pd.DataFrame
   * результат столбец значений добавленный в pd.DataFrame
2. MACD
   * 1) MACD = ЕМАs(P) − ЕМАi(P)
```angular2html
def macd(s: pd.Series) -> pd.Series:
    # s - столбец значений цен
    return s.ewm() - s.ewm() # формула по ссылке из ишью
def conservative_strategy_rise(s: pd.Series, date: list) -> pd.Series:
    if macd([прошедший период]) < 0 and macd([искомый период]) > 0:
         sl = abs(min(s[прошедший период, где macd > 0]) - s[date[-1]])
         tp = 1.5 * sl
         response = { 
               'Ветка стратегии' : 'Консервативная на повышение' 
               'StopLoss' : sl,
               'TakeProfit' : tp}
    else: 
        response = { 
                  'Ветка стратегии' : 'Cтратегия не применима' 
                  'StopLoss' : None,
                  'TakeProfit' : None}
    return responce

def concervative_strategy_decrease((s: pd.Series, date: list) -> pd.Series:
    if macd([прошедший период]) > 0 and macd([искомый период]) < 0:
         sl = abs(max(s[прошедший период, где macd < 0] - s[date[-1]]))
         tp = 1.5 * sl
         response = { 
               'Ветка стратегии' : 'Консервативная на понижение' 
               'StopLoss' : sl,
               'TakeProfit' : tp}
    else: 
        response = { 
                  'Ветка стратегии' : 'Cтратегия не применима' 
                  'StopLoss' : None,
                  'TakeProfit' : None}
    return responce
```

## Требования 
1. Timeframe = 1day
2. 